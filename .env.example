# ==============================================
# RAYA BACKEND — Configuration Reference (.env.example)
# ==============================================
# Copier ce fichier en .env et configurer les valeurs
#
#   cp .env.example .env
#
# Variables marquées (REQUIRED) : obligatoires, le serveur refusera de démarrer sans elles.
# Variables marquées (OPTIONAL) : ont des valeurs par défaut, non requises en dev.
#
# La validation est effectuée au démarrage par src/config/env.validation.ts
# ==============================================

# ==================== Application ====================
# (REQUIRED) Environment: development | production | test | staging
NODE_ENV=development

# (OPTIONAL) Port d'écoute HTTP — défaut: 3000
PORT=3000

# (OPTIONAL) Niveau de log: debug | info | warn | error — défaut: debug
LOG_LEVEL=debug

# (OPTIONAL) Nom de l'application affiché dans les emails — défaut: Raya
APP_NAME=Raya

# ==================== Database ====================
# (OPTIONAL) Type de base de données: better-sqlite3 | postgres — défaut: better-sqlite3
# Auto-détecté si DATABASE_URL est définie (postgres:// → postgres)
DB_TYPE=better-sqlite3

# (OPTIONAL) Nom de la base / chemin du fichier SQLite — défaut: raya_dev.sqlite
DB_DATABASE=raya_dev.sqlite

# (OPTIONAL) URL complète de connexion — Railway/cloud l'injectent automatiquement
# Si définie, DB_TYPE est auto-détecté en 'postgres' et les champs individuels sont ignorés
# DATABASE_URL=postgresql://user:password@host:port/database

# -- Les champs suivants sont requis si DB_TYPE=postgres ET DATABASE_URL n'est pas définie --
# DB_HOST=localhost
# DB_PORT=5432
# DB_USERNAME=raya
# DB_PASSWORD=your_secure_password
# DB_SSL=false

# ==================== JWT ====================
# (REQUIRED) Secret pour signer les access tokens — minimum 16 caractères !
# ⚠️  CHANGER IMPÉRATIVEMENT en production
JWT_SECRET=change-this-to-a-very-long-and-secure-secret-key-in-production

# (REQUIRED) Secret pour signer les refresh tokens — minimum 16 caractères !
JWT_REFRESH_SECRET=change-this-to-another-very-long-secret-key

# (OPTIONAL) Durée de vie access token en secondes — défaut: 3600 (1h)
JWT_EXPIRES_IN=3600

# (OPTIONAL) Durée de vie refresh token en secondes — défaut: 604800 (7j)
JWT_REFRESH_EXPIRES_IN=604800

# ==================== CORS ====================
# (OPTIONAL) URL du frontend — défaut: http://localhost:4200
FRONTEND_URL=http://localhost:4200

# (OPTIONAL) Origines autorisées, séparées par virgule
ALLOWED_ORIGINS=http://localhost:8080,http://localhost:5500,http://localhost:3001,http://localhost:5173

# (OPTIONAL) URLs production/staging pour CORS strict
# PRODUCTION_URL=https://raya-boutique.com
# PRODUCTION_ADMIN_URL=https://admin.raya-boutique.com
# STAGING_URL=https://staging.raya-boutique.com

# ==================== Redis / Cache ====================
# (OPTIONAL) Si non configuré, le cache mémoire est utilisé automatiquement
# REDIS_HOST=localhost
# REDIS_PORT=6379
# REDIS_PASSWORD=
# REDIS_DB=0

# (OPTIONAL) TTL du cache en secondes — défaut: 300 (5min)
CACHE_TTL=300

# ==================== Rate Limiting ====================
# (OPTIONAL) Fenêtre de rate limiting en secondes — défaut: 60
RATE_LIMIT_TTL=60

# (OPTIONAL) Nombre max de requêtes par fenêtre — défaut: 100
RATE_LIMIT_MAX=100

# ==================== Email / SMTP ====================
# (OPTIONAL) Configuration SMTP — requis pour envoyer des emails (reset password, OTP, etc.)
# SMTP_HOST=smtp.gmail.com
# SMTP_PORT=587
# SMTP_USER=your-email@gmail.com
# SMTP_PASS=your-app-password
# SMTP_FROM="Raya" <noreply@raya.app>

# ==================== OAuth ====================
# (OPTIONAL) Google OAuth — requis pour la connexion Google
# GOOGLE_CLIENT_ID=your-google-client-id
# GOOGLE_CLIENT_SECRET=your-google-client-secret
# GOOGLE_CALLBACK_URL=http://localhost:3000/api/auth/google/callback

# (OPTIONAL) GitHub OAuth — requis pour la connexion GitHub
# GITHUB_CLIENT_ID=your-github-client-id
# GITHUB_CLIENT_SECRET=your-github-client-secret
# GITHUB_CALLBACK_URL=http://localhost:3000/api/auth/github/callback

# ==================== 2FA ====================
# (OPTIONAL) Nom affiché dans l'app d'authentification — défaut: RayaBoutique
TWO_FACTOR_APP_NAME=RayaBoutique

# ==================== Fichiers ====================
# (OPTIONAL) Répertoire d'upload — défaut: ./uploads
UPLOAD_DIR=./uploads

# (OPTIONAL) Répertoire de backups — défaut: ./backups
BACKUP_DIR=./backups

# (OPTIONAL) Taille max fichier en octets — défaut: 10485760 (10 MB)
MAX_FILE_SIZE=10485760

# ==================== Multi-Tenant ====================
# (OPTIONAL) Tenant par défaut pour les nouveaux utilisateurs OAuth — défaut: default
DEFAULT_TENANT_ID=default
